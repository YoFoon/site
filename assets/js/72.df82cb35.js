(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{269:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"常见请求头和响应头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见请求头和响应头","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见请求头和响应头")]),t._v(" "),a("h2",{attrs:{id:"请求头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求头","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Accept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n浏览器可以接收的类型\nAccept-Charset: ISO-8859-1\n浏览器可以接收的编码类型\nAccept-Encoding: gzip,compress\n浏览器可以接收压缩编码类型\nAccept-Language: en-us,zh-cn\n浏览器可以接收的语言和国家类型\nHost: www.lks.cn:80\n浏览器请求的主机和端口\nReferer: http://www.lks.cn/index.html\n请求来自于哪个页面\nUser-Agent: Mozilla/4.0 compatible; MSIE 5.5; Windows NT 5.0\n浏览器相关信息\nIf-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT\n某个页面缓存时间\nCookie：\n浏览器暂存服务器发送的信息\nConnection: close1.0/Keep-Alive1.1\nHTTP请求的版本的特点\nDate: Tue, 11 Jul 2000 18:23:51GMT\n请求网站的时间\nAllow:GET\n请求的方法 GET 常见的还有POST\nKeep-Alive：5\n连接的时间；5\nConnection：keep-alive\n是否是长连接\nCache-Control：max-age=300\n缓存的最长时间 300\n")])])])]),a("h2",{attrs:{id:"响应头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应头","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n控制浏览器显示哪个页面\nServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("apache nginx\n服务器的类型\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gzip\n服务器发送的压缩编码方式\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n服务器发送显示的字节码长度\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Language"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cn\n服务器发送内容的语言和国家名\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" charset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UTF")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n服务器发送内容的类型和编码类型\nLast"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Modified"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Tue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("51")]),t._v("GMT\n服务器最后一次修改的时间\nRefresh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn\n控制浏览器"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("秒钟后转发"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("所指向的页面\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Disposition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" attachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("lks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jpg\n服务器控制浏览器发下载方式打开文件\nTransfer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chunked\n服务器分块传递数据到客户端\nSet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Q0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("Lb_nQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("search\n服务器发送Cookie相关的信息\nExpires"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n资源的过期时间，提供给浏览器缓存数据"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("永远过期\nCache"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache\n告诉浏览器，一定要回服务器校验，不管有没有缓存数据。\nPragma"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache\n服务器控制浏览器不要缓存网页\nConnection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" close"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Keep"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AliveHTTP\n请求的版本的特点\nDate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Tue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("51")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\n响应网站的时间\nETag：“ihfdgkdgnp98hdfg”\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("资源实体的标识")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("唯一标识，类似md5值，文件有修改md5就不一样"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"http-协议定义了几个可以用来控制浏览器缓存关键字，它们是："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-协议定义了几个可以用来控制浏览器缓存关键字，它们是：","aria-hidden":"true"}},[t._v("#")]),t._v(" HTTP 协议定义了几个可以用来控制浏览器缓存关键字，它们是：")]),t._v(" "),a("p",[t._v("Expires,\nPragma: no-cache,\nCache-Control ,\nLast-Modified ,\nETag。")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Expires")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("过期时间\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Expires是Web")]),t._v("服务器响应消息头字段，\n在响应http请求时告诉浏览器在过期时间前浏览器可以直接从浏览器缓存取数据，而无需再次请求。\n不过"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Expires")]),t._v(" 是"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v("的东西，现在默认浏览器均默认使用"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("，所以它的作用基本忽略。\n\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Expires")]),t._v(" 的一个缺点就是，返回的到期时间是服务器端的时间，\n这样存在一个问题，如果客户端的时间与服务器的时间相差很大（比如时钟不同步，或者跨时区），\n那么误差就很大，所以在"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("版开始，被"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("秒替代。\n\n过期时间必须是"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("格式的日期时间，其他的都会被解析成当前时间“之前”，缓存会马上过期，\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("的日期时间必须是格林威治时间（"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("），而不是本地时间。举例：\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Expires")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Fri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Oct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2009")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Pragma")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache\n为了兼容"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("HTTP1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("，可以使用"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Pragma")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache头来告诉浏览器不要缓存内容"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n许多人相信设置一个 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Pragma")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" 协议可以控制缓存是否开启。\n\n这其实不是完全正确的。"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" 协议的详细说明中并没有设置任何有关"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Pragma")]),t._v("的条例，\n相反，"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Pragma")]),t._v("请求十分有争议。虽然一部分缓存会受到此参数的影响，但大多数一点作用也没有，\n请使用header头协议代替它！（作用有争议，最好不用）\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("control"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("control直译成中文就是缓存控制，它的作用就是缓存控制，这个http头的值有几种。\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("秒"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" — 执行缓存被认为是最新的最长时间。\n类似于过期时间，这个参数是基于请求时间的相对时间间隔，而不是绝对过期时间，\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("秒"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("是一个数字，单位是秒：从请求时间开始到过期时间之间的秒数。\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" s"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("maxage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("秒"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" — 类似于"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age属性，除了他应用于共享（如：代理服务器）缓存\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" — 标记认证内容也可以被缓存，一般来说： 经过"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("认证才能访问的内容，输出是自动不可以缓存的；\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache — 强制每次请求直接发送给源服务器，而不经过本地缓存版本的校验。这对于需要确认认证应用很有用（可以和"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v("结合使用），或者严格要求使用最新数据的应用（不惜牺牲使用缓存的所有好处）。\n指示请求或响应消息不能缓存，该选项并不是说可以设置”不缓存“，容易望文生义"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("store — 强制缓存在任何情况下都不要保留任何副本\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" must"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("revalidate — 告诉缓存必须遵循所有你给予副本的新鲜度的，"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("允许缓存在某些特定情况下返回过期数据，指定了这个属性，你高速缓存，你希望严格的遵循你的规则。\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" proxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("revalidate — 和 must"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("revalidate类似，除了他只对缓存代理服务器起作用\n举例"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" must"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("revalidate\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Last")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Since")]),t._v("：\n\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Last")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Since要配合Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control")]),t._v("使用。\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Last")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),t._v("：标示这个响应资源的最后修改时间。\nweb服务器在响应请求时，告诉浏览器资源的最后修改时间。\n\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Since：当资源过期时（使用Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control标识的max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age），\n发现资源具有"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Last")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),t._v("声明，\n则再次向web服务器请求时带上头 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Since")]),t._v("，表示请求时间。\nweb服务器收到请求后发现有头"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Modified")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Since")]),t._v(" 则与被请求资源的最后修改时间进行比对。\n若最后修改时间较新，说明资源又被改动过，则响应整片资源内容（写在响应消息包体内），"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("；\n\n若最后修改时间一致，说明资源无新修改，则响应"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("304")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("无需包体，节省浏览"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("，\n告知浏览器继续使用所保存的cache。\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Etag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("None")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Match")]),t._v("：\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Etag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("None")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Match也要配合Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control")]),t._v("使用。\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Etag：web")]),t._v("服务器响应请求时，告诉浏览器当前资源在服务器的唯一标识（生成规则由服务器决定）。\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Apache中，ETag的值，默认是对文件的索引节（INode")]),t._v("），\n大小（"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Size）和最后修改时间（MTime）进行Hash")]),t._v("后得到的。\n\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("None")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Match：当资源过期时（使用Cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Control标识的max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age），发现资源具有"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Etage")]),t._v("声明，\n则再次向web服务器请求时带上头"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("None")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Match")]),t._v(" （"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Etag")]),t._v("的值）。\nweb服务器收到请求后发现有头"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("If")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("None")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Match")]),t._v(" 则与被请求资源的相应校验串进行比对，\n决定返回"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("或"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("304")]),t._v("。\n")])])]),a("p",[t._v("Etag 与 Last-Modified 区别：")]),t._v(" "),a("div",{staticClass:"language-undefined extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. Last-Modified标注的最后修改只能精确到秒级，\n如果某些文件在1秒钟以内，被修改多次的话，它将不能准确标注文件的修改时间\n如果某些文件会被定期生成，当有时内容并没有任何变化，但Last-Modified却改变了，导致文件没法使用缓存\n有可能存在服务器没有准确获取文件修改时间，或者与代理服务器时间不一致等情形\n\n2. Etag是服务器自动生成或者由开发者生成的对应资源在服务器端的唯一标识符，能够更加准确的控制缓存。\nLast-Modified与ETag一起使用时，服务器会优先验证ETag。\n")])])]),a("p",[t._v("浏览器刷新：")]),t._v(" "),a("div",{staticClass:"language-undefined extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("url地址栏里敲击enter：\n只有少数的请求会发送出去，而且几乎没有图片的请求，\n这是因为请求时会先检查本地是不是缓存了请求的图片，\n如果有缓存而且没有过期（过期可以通过该图片请求的header查看），他就不会发出这个图片request。\n\nF5：把所有请求都发给了，服务器判断还没有过期，就直接返回304not modified\n\nctrl+F5：所有的请求都是重新发送，重新从server读取内容，一点cache都没有读为了防止在server的cache里读取，\n在ctrl+f5刷新时，request的header里还加了特殊字段，\n会加pragma：no-cache   cache control：no-cache。\n这两个就是告诉服务器到浏览器中间的所有节点，\n没有cache，看到这个中间节点也不查自己的cache，保证请求都是从server获得的。\n")])])]),a("h2",{attrs:{id:"浏览器缓存行为还有用户的行为有关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存行为还有用户的行为有关","aria-hidden":"true"}},[t._v("#")]),t._v(" 浏览器缓存行为还有用户的行为有关")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qnm.hunliji.com/FsiagGHD-euHfjkjX0tIUJeL2eLX",alt:"img"}})])])},[],!1,null,null,null);s.default=e.exports}}]);
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTPS | YoFoon&#39;s前端小站</title>
    <meta name="description" content="好好学习，努力化蛹成蝶">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/logo.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/logo.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">
    
    <link rel="preload" href="/assets/css/0.styles.05cc7eb5.css" as="style"><link rel="preload" href="/assets/js/app.1274b19c.js" as="script"><link rel="preload" href="/assets/js/3.e5f6c01d.js" as="script"><link rel="preload" href="/assets/js/58.7d58a545.js" as="script"><link rel="preload" href="/assets/js/6.da654ace.js" as="script"><link rel="prefetch" href="/assets/js/10.92e21c8d.js"><link rel="prefetch" href="/assets/js/11.cc1411d8.js"><link rel="prefetch" href="/assets/js/12.2d961c16.js"><link rel="prefetch" href="/assets/js/13.205676dc.js"><link rel="prefetch" href="/assets/js/14.b165508a.js"><link rel="prefetch" href="/assets/js/15.486ed8f4.js"><link rel="prefetch" href="/assets/js/16.ac82d50a.js"><link rel="prefetch" href="/assets/js/17.db1abd0b.js"><link rel="prefetch" href="/assets/js/18.bd9497b5.js"><link rel="prefetch" href="/assets/js/19.081301d7.js"><link rel="prefetch" href="/assets/js/20.b8d7b737.js"><link rel="prefetch" href="/assets/js/21.086584d3.js"><link rel="prefetch" href="/assets/js/22.70d87ff4.js"><link rel="prefetch" href="/assets/js/23.cf08daab.js"><link rel="prefetch" href="/assets/js/24.07387fb5.js"><link rel="prefetch" href="/assets/js/25.4e770138.js"><link rel="prefetch" href="/assets/js/26.4bf8b93c.js"><link rel="prefetch" href="/assets/js/27.38076681.js"><link rel="prefetch" href="/assets/js/28.eddd4fec.js"><link rel="prefetch" href="/assets/js/29.10d1433e.js"><link rel="prefetch" href="/assets/js/30.4a707e0a.js"><link rel="prefetch" href="/assets/js/31.8677c398.js"><link rel="prefetch" href="/assets/js/32.12c7f3b9.js"><link rel="prefetch" href="/assets/js/33.932ee82b.js"><link rel="prefetch" href="/assets/js/34.d4b9aeb4.js"><link rel="prefetch" href="/assets/js/35.acc1896e.js"><link rel="prefetch" href="/assets/js/36.527e7284.js"><link rel="prefetch" href="/assets/js/37.a3f87927.js"><link rel="prefetch" href="/assets/js/38.88ddbf7a.js"><link rel="prefetch" href="/assets/js/39.fd7962a1.js"><link rel="prefetch" href="/assets/js/4.d584cd42.js"><link rel="prefetch" href="/assets/js/40.15dc2bae.js"><link rel="prefetch" href="/assets/js/41.92269fcd.js"><link rel="prefetch" href="/assets/js/42.b6a87d96.js"><link rel="prefetch" href="/assets/js/43.84bcdfb9.js"><link rel="prefetch" href="/assets/js/44.86791ad1.js"><link rel="prefetch" href="/assets/js/45.6a3fb16d.js"><link rel="prefetch" href="/assets/js/46.b5293326.js"><link rel="prefetch" href="/assets/js/47.7d80c117.js"><link rel="prefetch" href="/assets/js/48.5085aee1.js"><link rel="prefetch" href="/assets/js/49.45b201a6.js"><link rel="prefetch" href="/assets/js/5.e3a314f7.js"><link rel="prefetch" href="/assets/js/50.3ea3c47a.js"><link rel="prefetch" href="/assets/js/51.7319689a.js"><link rel="prefetch" href="/assets/js/52.c4d9b204.js"><link rel="prefetch" href="/assets/js/53.3114bf6b.js"><link rel="prefetch" href="/assets/js/54.995bca0e.js"><link rel="prefetch" href="/assets/js/55.e27397eb.js"><link rel="prefetch" href="/assets/js/56.e4513a4e.js"><link rel="prefetch" href="/assets/js/57.1159b507.js"><link rel="prefetch" href="/assets/js/59.dbd46eb1.js"><link rel="prefetch" href="/assets/js/60.92e88ec9.js"><link rel="prefetch" href="/assets/js/61.8d5cdca3.js"><link rel="prefetch" href="/assets/js/62.9af7431d.js"><link rel="prefetch" href="/assets/js/63.b41e9a05.js"><link rel="prefetch" href="/assets/js/64.4a3c4ea7.js"><link rel="prefetch" href="/assets/js/65.835613ef.js"><link rel="prefetch" href="/assets/js/66.8cd25ac9.js"><link rel="prefetch" href="/assets/js/67.2fdfc8d2.js"><link rel="prefetch" href="/assets/js/68.1a6fa670.js"><link rel="prefetch" href="/assets/js/69.24c523fc.js"><link rel="prefetch" href="/assets/js/7.0f973c56.js"><link rel="prefetch" href="/assets/js/70.afc49943.js"><link rel="prefetch" href="/assets/js/71.425d9845.js"><link rel="prefetch" href="/assets/js/72.df82cb35.js"><link rel="prefetch" href="/assets/js/73.6461ff8b.js"><link rel="prefetch" href="/assets/js/74.42fdc9ca.js"><link rel="prefetch" href="/assets/js/75.6029d9dd.js"><link rel="prefetch" href="/assets/js/76.ac5c877d.js"><link rel="prefetch" href="/assets/js/77.91697145.js"><link rel="prefetch" href="/assets/js/78.3f23eaf7.js"><link rel="prefetch" href="/assets/js/79.3390703e.js"><link rel="prefetch" href="/assets/js/8.cd0d92c8.js"><link rel="prefetch" href="/assets/js/80.14cf59a6.js"><link rel="prefetch" href="/assets/js/81.df106301.js"><link rel="prefetch" href="/assets/js/82.b9c47d41.js"><link rel="prefetch" href="/assets/js/83.7d601b24.js"><link rel="prefetch" href="/assets/js/84.8f06dfd5.js"><link rel="prefetch" href="/assets/js/85.0361ac05.js"><link rel="prefetch" href="/assets/js/86.cfc2ea02.js"><link rel="prefetch" href="/assets/js/87.04b875f6.js"><link rel="prefetch" href="/assets/js/9.cd570fc8.js"><link rel="prefetch" href="/assets/js/vendors~notification.7bcb2342.js">
    <link rel="stylesheet" href="/assets/css/0.styles.05cc7eb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YoFoon's前端小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link router-link-active">知识</a></div><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div> <a href="https://github.com/YoFoon/FE-FACE" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link router-link-active">知识</a></div><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div> <a href="https://github.com/YoFoon/FE-FACE" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/" class="sidebar-link">知识点</a></li><li><a href="/knowledge/book.html" class="sidebar-link">书籍/课程推荐</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/html.html" class="sidebar-link">HTML 基础</a></li><li><a href="/knowledge/css.html" class="sidebar-link">CSS 基础</a></li><li><a href="/knowledge/jsBasic.html" class="sidebar-link">JavaScript 基础</a></li><li><a href="/knowledge/browser.html" class="sidebar-link">浏览器基础</a></li><li><a href="/knowledge/jsonp.html" class="sidebar-link">前端跨域</a></li><li><a href="/knowledge/jsWritten.html" class="sidebar-link">JS 手写源码</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端深入</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/hoisting.html" class="sidebar-link">JavaScript 的『预解释』与『变量提升』</a></li><li><a href="/knowledge/eventLoop.html" class="sidebar-link">Event Loop 详解</a></li><li><a href="/knowledge/immutable.html" class="sidebar-link">实现不可变数据</a></li><li><a href="/knowledge/memory.html" class="sidebar-link">JavaScript 内存管理</a></li><li><a href="/knowledge/deepclone.html" class="sidebar-link">实现深克隆</a></li><li><a href="/knowledge/event.html" class="sidebar-link">如何实现一个 Event</a></li><li><a href="/knowledge/mechanism.html" class="sidebar-link">JavaScript 的运行机制</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/dom.html" class="sidebar-link">DOM</a></li><li><a href="/knowledge/domRender.html" class="sidebar-link">浏览器渲染原理</a></li><li><a href="/knowledge/cache.html" class="sidebar-link">浏览器的缓存机制</a></li><li><a href="/knowledge/url.html" class="sidebar-link">输入 URL 到页面渲染的整个流程</a></li><li><a href="/knowledge/requestHeader.html" class="sidebar-link">常见请求头和响应头</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/http.html" class="sidebar-link">HTTP 协议</a></li><li><a href="/knowledge/tcp.html" class="sidebar-link">TCP 面试题</a></li><li><a href="/knowledge/cdn.html" class="sidebar-link">CDN 原理简析</a></li><li><a href="/knowledge/https.html" class="active sidebar-link">HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/https.html#一、什么是-https" class="sidebar-link">一、什么是 HTTPS</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#二、为什么需要-https" class="sidebar-link">二、为什么需要 HTTPS</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#三、https-如何解决-http-上述问题" class="sidebar-link">三、HTTPS 如何解决 HTTP 上述问题?</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#四、-https-工作流程" class="sidebar-link">四、 HTTPS 工作流程</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#五、http-与-https-的区别" class="sidebar-link">五、HTTP 与 HTTPS 的区别</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#六、为何不所有的网站都使用-https" class="sidebar-link">六、为何不所有的网站都使用 HTTPS</a></li><li class="sidebar-sub-header"><a href="/knowledge/https.html#如何劫持-https-的请求，提供思路" class="sidebar-link">如何劫持 https 的请求，提供思路</a></li></ul></li><li><a href="/knowledge/http2.html" class="sidebar-link">HTTP2</a></li><li><a href="/knowledge/httpWritten.html" class="sidebar-link">HTTP 笔试部分</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常用算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/algorithm.html" class="sidebar-link">算法面试题</a></li><li><a href="/knowledge/string.html" class="sidebar-link">字符串类面试题</a></li><li><a href="/knowledge/tree.html" class="sidebar-link">二叉树</a></li><li><a href="/knowledge/chain.html" class="sidebar-link">链表</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/react.html" class="sidebar-link">React 面试题</a></li><li><a href="/knowledge/virtualDom.html" class="sidebar-link">虚拟 DOM 原理</a></li><li><a href="/knowledge/devsProxy.html" class="sidebar-link">Proxy 比 defineproperty 优劣对比?</a></li><li><a href="/knowledge/setState.html" class="sidebar-link">setState 到底是异步的还是同步的?</a></li><li><a href="/knowledge/router.html" class="sidebar-link">前端路由的实现</a></li><li><a href="/knowledge/reactError.html" class="sidebar-link">React 错误捕获</a></li><li><a href="/knowledge/fiber.html" class="sidebar-link">React Fiber 架构解析</a></li><li><a href="/knowledge/abstract.html" class="sidebar-link">React 组件复用指南</a></li><li><a href="/knowledge/reactHook.html" class="sidebar-link">React-hooks 抽象组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/load.html" class="sidebar-link">前端性能优化</a></li><li><a href="/knowledge/execute.html" class="sidebar-link">前端性能优化-执行篇</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/webpack.html" class="sidebar-link">webpack 面试题</a></li><li><a href="/knowledge/engineering.html" class="sidebar-link">前端工程化</a></li><li><a href="/knowledge/ast.html" class="sidebar-link">如何写一个 babel</a></li><li><a href="/knowledge/WebpackHMR.html" class="sidebar-link">Webpack HMR 原理解析</a></li><li><a href="/knowledge/webpackPlugin.html" class="sidebar-link">webpack 插件编写</a></li><li><a href="/knowledge/webpackPluginDesign.html" class="sidebar-link">webpack 插件化设计</a></li><li><a href="/knowledge/webpackMoudle.html" class="sidebar-link">Webpack 模块机制</a></li><li><a href="/knowledge/webpackLoader.html" class="sidebar-link">webpack loader 实现</a></li><li><a href="/knowledge/babelPlugin.html" class="sidebar-link">如何开发 Babel 插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>安全</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/security.html" class="sidebar-link">前端安全</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https"><a href="#https" aria-hidden="true" class="header-anchor">#</a> HTTPS</h1> <h2 id="一、什么是-https"><a href="#一、什么是-https" aria-hidden="true" class="header-anchor">#</a> 一、什么是 HTTPS</h2> <p>HTTPS 是在 HTTP 上建立 SSL 加密层，并对传输数据进行加密，是 HTTP 协议的安全版。现在它被广泛用于万维网上安全敏感的通讯，例如交易支付方面。</p> <p>HTTPS 主要作用是：</p> <p>（1）对数据进行加密，并建立一个信息安全通道，来保证传输过程中的数据安全;</p> <p>（2）对网站服务器进行真实身份认证。</p> <p>我们经常会在 Web 的登录页面和购物结算界面等使用 HTTPS 通信。使用 HTTPS 通信时，不再用<code>http://</code>，而是改用<code>https://</code>。另外，当浏览器访问 HTTPS 通信有效的 Web 网站时，浏览器的地址栏内会出现一个带锁的标记。对 HTTPS 的显示方式会因浏览器的不同而有所改变。</p> <h2 id="二、为什么需要-https"><a href="#二、为什么需要-https" aria-hidden="true" class="header-anchor">#</a> 二、为什么需要 HTTPS</h2> <p>在 HTTP 协议中有可能存在信息窃取或身份伪装等安全问题。使用 HTTPS 通信机制可以有效地防止这些问题，接下来，我们先来了解下
HTTP 协议存在的哪些问题：</p> <ul><li>通信使用明文（不加密），内容可能被窃听</li></ul> <p>由于 HTTP 本身不具备加密的功能，所以也无法做到对通信整体（使用 HTTP 协议通信的请求和响应的内容）进行加密。即，<strong>HTTP 报文使用明文（指未经过加密的报文）方式发送</strong>。</p> <p>HTTP 明文协议的缺陷是导致数据泄露、数据篡改、流量劫持、钓鱼攻击等安全问题的重要原因。HTTP 协议无法加密数据，所有通信数据都在网络中明文“裸奔”。通过网络的嗅探设备及一些技术手段，就可还原 HTTP 报文内容。</p> <ul><li>无法证明报文的完整性，所以可能遭篡改</li></ul> <p>所谓完整性是指信息的准确度。若无法证明其完整性，通常也就意味着无法判断信息是否准确。由于 HTTP 协议无法证明通信的报文完整性，因此，在请求或响应送出之后直到对方接收之前的这段时间内，即使请求或响应的内容遭到篡改，也没有办法获悉。
换句话说，<strong>没有任何办法确认，发出的请求/响应和接收到的请求/响应是前后相同的</strong>。</p> <ul><li>不验证通信方的身份，因此有可能遭遇伪装</li></ul> <p><strong>HTTP 协议中的请求和响应不会对通信方进行确认</strong>。在 HTTP 协议通信时，由于不存在确认通信方的处理步骤，任何人都可以发起请求。另外，服务器只要接收到请求，不管对方是谁都会返回一个响应（但也仅限于发送端的 IP 地址和端口号没有被 Web 服务器设定限制访问的前提下）</p> <p>HTTP 协议无法验证通信方身份，任何人都可以伪造虚假服务器欺骗用户，实现“钓鱼欺诈”，用户无法察觉。</p> <p>反观 HTTPS 协议，它比 HTTP 协议相比多了以下优势（下文会详细介绍）:</p> <ul><li>数据隐私性：内容经过对称加密，每个连接生成一个唯一的加密密钥</li> <li>数据完整性：内容传输经过完整性校验</li> <li>身份认证：第三方无法伪造服务端（客户端）身份</li></ul> <h2 id="三、https-如何解决-http-上述问题"><a href="#三、https-如何解决-http-上述问题" aria-hidden="true" class="header-anchor">#</a> 三、HTTPS 如何解决 HTTP 上述问题?</h2> <p>HTTPS 并非是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL 和 TLS 协议代替而已。</p> <p>通常，HTTP 直接和 TCP 通信。当使用 SSL 时，则演变成先和 SSL 通信，再由 SSL 和 TCP 通信了。简言之，<strong>所谓 HTTPS，其实就是身披 SSL 协议这层外壳的 HTTP</strong>。</p> <p>在采用 SSL 后，HTTP 就拥有了 HTTPS 的加密、证书和完整性保护这些功能。也就是说<strong>HTTP 加上加密处理和认证以及完整性保护后即是 HTTPS</strong>。</p> <p>HTTPS 协议的主要功能基本都依赖于 TLS/SSL 协议，TLS/SSL 的功能实现主要依赖于三类基本算法：散列函数 、对称加密和非对称加密，<strong>其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性</strong>。</p> <h3 id="_1-解决内容可能被窃听的问题——加密"><a href="#_1-解决内容可能被窃听的问题——加密" aria-hidden="true" class="header-anchor">#</a> 1.解决内容可能被窃听的问题——加密</h3> <h4 id="方法-1-对称加密"><a href="#方法-1-对称加密" aria-hidden="true" class="header-anchor">#</a> 方法 1.对称加密</h4> <p>这种方式加密和解密同用一个密钥。加密和解密都会用到密钥。<strong>没有密钥就无法对密码解密，反过来说，任何人只要持有密钥就能解密了</strong>。</p> <p>以对称加密方式加密时必须将密钥也发给对方。可究竟怎样才能安全地转交？在互联网上转发密钥时，如果通信被监听那么密钥就可会落人攻击者之手，同时也就失去了加密的意义。另外还得设法安全地保管接收到的密钥。</p> <h4 id="方法-2-非对称加密"><a href="#方法-2-非对称加密" aria-hidden="true" class="header-anchor">#</a> 方法 2.非对称加密</h4> <p>公开密钥加密使用一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥。顾名思义，<strong>私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得</strong>。</p> <p>使用公开密钥加密方式，发送密文的一方使用<strong>对方的公开密钥</strong>进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。利用这种方式，不需要发送用来解密的私有密钥，也不必担心密钥被攻击者窃听而盗走。</p> <p>非对称加密的特点是信息传输一对多，服务器只需要维持一个私钥就能够和多个客户端进行加密通信。</p> <p>这种方式有以下缺点：</p> <ul><li>公钥是公开的，所以针对私钥加密的信息，黑客截获后可以使用公钥进行解密，获取其中的内容；</li> <li>公钥并不包含服务器的信息，使用非对称加密算法无法确保服务器身份的合法性，存在中间人攻击的风险，服务器发送给客户端的公钥可能在传送过程中被中间人截获并篡改；</li> <li>使用非对称加密<strong>在数据加密解密过程需要消耗一定时间</strong>，降低了数据传输效率；</li></ul> <h4 id="方法-3-对称加密-非对称加密-https-采用这种方式"><a href="#方法-3-对称加密-非对称加密-https-采用这种方式" aria-hidden="true" class="header-anchor">#</a> 方法 3.对称加密+非对称加密(HTTPS 采用这种方式)</h4> <p>使用对称密钥的好处是解密的效率比较快，使用非对称密钥的好处是可以使得传输的内容不能被破解，因为就算你拦截到了数据，但是没有对应的私钥，也是不能破解内容的。就比如说你抢到了一个保险柜，但是没有保险柜的钥匙也不能打开保险柜。那我们就将对称加密与非对称加密结合起来,充分利用两者各自的优势，<strong>在交换密钥环节使用非对称加密方式，之后的建立通信交换报文阶段则使用对称加密方式</strong>。</p> <p>具体做法是：<strong>发送密文的一方使用对方的公钥进行加密处理“对称的密钥”，然后对方用自己的私钥解密拿到“对称的密钥”，这样可以确保交换的密钥是安全的前提下，使用对称加密方式进行通信</strong>。所以，HTTPS 采用对称加密和非对称加密两者并用的混合加密机制。</p> <h3 id="_2-解决报文可能遭篡改问题——数字签名"><a href="#_2-解决报文可能遭篡改问题——数字签名" aria-hidden="true" class="header-anchor">#</a> 2.解决报文可能遭篡改问题——数字签名</h3> <p>网络传输过程中需要经过很多中间节点，虽然数据无法被解密，但可能被篡改，那如何校验数据的完整性呢？----校验数字签名。</p> <p><strong>数字签名有两种功效</strong>：</p> <ul><li>能确定消息确实是由发送方签名并发出来的，因为别人假冒不了发送方的签名。</li> <li>数字签名能确定消息的完整性,证明数据是否未被篡改过。</li></ul> <p><strong>数字签名如何生成:</strong>
将一段文本先用 Hash 函数生成消息摘要，然后用发送者的私钥加密生成数字签名，与原文文一起传送给接收者。接下来就是接收者校验数字签名的流程了。</p> <p><strong>校验数字签名流程</strong>：
接收者只有用发送者的公钥才能解密被加密的摘要信息，然后用 HASH 函数对收到的原文产生一个摘要信息，与上一步得到的摘要信息对比。如果相同，则说明收到的信息是完整的，在传输过程中没有被修改，否则说明信息被修改过，因此数字签名能够验证信息的完整性。</p> <p>假设消息传递在 Kobe，James 两人之间发生。James 将消息连同数字签名一起发送给 Kobe，Kobe 接收到消息后，通过校验数字签名，就可以验证接收到的消息就是 James 发送的。当然，这个过程的前提是 Kobe 知道 James 的公钥。问题的关键的是，和消息本身一样，公钥不能在不安全的网络中直接发送给 Kobe,或者说拿到的公钥如何证明是 James 的。</p> <p>此时就需要引入了<strong>证书颁发机构</strong>（Certificate Authority，简称 CA），CA 数量并不多，Kobe 客户端内置了所有受信任 CA 的证书。CA 对 James 的公钥（和其他信息）数字签名后生成证书。</p> <h3 id="_3-解决通信方身份可能被伪装的问题——数字证书"><a href="#_3-解决通信方身份可能被伪装的问题——数字证书" aria-hidden="true" class="header-anchor">#</a> 3.解决通信方身份可能被伪装的问题——数字证书</h3> <p>数字证书认证机构处于客户端与服务器双方都可信赖的第三方机构的立场上。
我们来介绍一下数字证书认证机构的业务流程：</p> <ul><li>服务器的运营人员向第三方机构 CA 提交公钥、组织信息、个人信息(域名)等信息并申请认证;</li> <li>CA 通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等;</li> <li>如信息审核通过，CA 会向申请者签发认证文件-证书。证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA 的信息、有效时间、证书序列号等信息的明文，同时包含一个签名。 其中签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA 的私钥对信息摘要进行加密，密文即签名;</li> <li>客户端 Client 向服务器 Server 发出请求时，Server 返回证书文件;</li> <li>客户端 Client 读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应 CA 的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即服务器的公开密钥是值得信赖的。</li> <li>客户端还会验证证书相关的域名信息、有效时间等信息; 客户端会内置信任 CA 的证书信息(包含公钥)，如果 CA 不被信任，则找不到对应 CA 的证书，证书也会被判定非法。</li></ul> <h2 id="四、-https-工作流程"><a href="#四、-https-工作流程" aria-hidden="true" class="header-anchor">#</a> 四、 HTTPS 工作流程</h2> <p>1.Client 发起一个 HTTPS（比如<code>https://juejin.im/user/5a9a9cdcf265da238b7d771c</code>）的请求，根据 RFC2818 的规定，Client 知道需要连接 Server 的 443（默认）端口。</p> <p>2.Server 把事先配置好的公钥证书（public key certificate）返回给客户端。</p> <p>3.Client 验证公钥证书：比如是否在有效期内，证书的用途是不是匹配 Client 请求的站点，是不是在 CRL 吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的 Root 证书或者 Client 内置的 Root 证书）。如果验证通过则继续，不通过则显示警告信息。</p> <p>4.Client 使用伪随机数生成器生成加密所使用的对称密钥，然后用证书的公钥加密这个对称密钥，发给 Server。</p> <p>5.Server 使用自己的私钥（private key）解密这个消息，得到对称密钥。至此，Client 和 Server 双方都持有了相同的对称密钥。</p> <p>6.Server 使用对称密钥加密“明文内容 A”，发送给 Client。</p> <p>7.Client 使用对称密钥解密响应的密文，得到“明文内容 A”。</p> <p>8.Client 再次发起 HTTPS 的请求，使用对称密钥加密请求的“明文内容 B”，然后 Server 使用对称密钥解密密文，得到“明文内容 B”。</p> <h2 id="五、http-与-https-的区别"><a href="#五、http-与-https-的区别" aria-hidden="true" class="header-anchor">#</a> 五、HTTP 与 HTTPS 的区别</h2> <ul><li>HTTP 是明文传输协议，HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。</li></ul> <p>关于安全性，用最简单的比喻形容两者的关系就是卡车运货，HTTP 下的运货车是敞篷的，货物都是暴露的。而 https 则是封闭集装箱车，安全性自然提升不少。</p> <ul><li>HTTPS 比 HTTP 更加安全，对搜索引擎更友好，利于 SEO,谷歌、百度优先索引 HTTPS 网页;</li> <li>HTTPS 需要用到 SSL 证书，而 HTTP 不用;</li> <li>HTTPS 标准端口 443，HTTP 标准端口 80;</li> <li>HTTPS 基于传输层，HTTP 基于应用层;</li> <li>HTTPS 在浏览器显示绿色安全锁，HTTP 没有显示;</li></ul> <h2 id="六、为何不所有的网站都使用-https"><a href="#六、为何不所有的网站都使用-https" aria-hidden="true" class="header-anchor">#</a> 六、为何不所有的网站都使用 HTTPS</h2> <p>既然 HTTPS 那么安全可靠，那为何不所有的 Web 网站都使用 HTTPS？</p> <p>首先，很多人还是会觉得 HTTPS 实施有门槛，这个门槛在于需要权威 CA 颁发的 SSL 证书。从证书的选择、购买到部署，传统的模式下都会比较耗时耗力。</p> <p>其次，HTTPS 普遍认为性能消耗要大于 HTTP，因为<strong>与纯文本通信相比，加密通信会消耗更多的 CPU 及内存资源</strong>。如果每次通信都加密，会消耗相当多的资源，平摊到一台计算机上时，能够处理的请求数量必定也会随之减少。但事实并非如此，用户可以通过性能优化、把证书部署在 SLB 或 CDN，来解决此问题。举个实际的例子，“双十一”期间，全站 HTTPS 的淘宝、天猫依然保证了网站和移动端的访问、浏览、交易等操作的顺畅、平滑。通过测试发现，经过优化后的许多页面性能与 HTTP 持平甚至还有小幅提升，因此 HTTPS 经过优化之后其实并不慢。</p> <p>除此之外，<strong>想要节约购买证书的开销也是原因之一</strong>。要进行 HTTPS 通信，证书是必不可少的。而使用的证书必须向认证机构（CA）购买。</p> <p>最后是安全意识。相比国内，国外互联网行业的安全意识和技术应用相对成熟，HTTPS 部署趋势是由社会、企业、政府共同去推动的。</p> <h2 id="如何劫持-https-的请求，提供思路"><a href="#如何劫持-https-的请求，提供思路" aria-hidden="true" class="header-anchor">#</a> 如何劫持 https 的请求，提供思路</h2> <p>很多人在 google 上搜索“前端面试 + https 详解”，把答案倒背如流，但是问到如何劫持 https 请求的时候就一脸懵逼，是因为还是停留在 https 理论性阶段。</p> <p>想告诉大家的是，就算是 https，也不是绝对的安全，以下提供一个本地劫持 https 请求的简单思路。</p> <p>模拟中间人攻击，以百度为例</p> <ul><li>先用 OpenSSL 查看下证书，直接调用 openssl 库识别目标服务器支持的 SSL/TLS cipher suite</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    openssl s_client -connect www.baidu.com:443
复制代码
</code></pre></div><ul><li>用 sslcan 识别 ssl 配置错误，过期协议，过时 cipher suite 和 hash 算法</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    sslscan -tlsall www.baidu.com:443
复制代码
</code></pre></div><ul><li>分析证书详细数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    sslscan -show-certificate --no-ciphersuites www.baidu.com:443
复制代码
</code></pre></div><ul><li>生成一个证书</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    openssl req -new -x509 -days 1096 -key ca.key -out ca.crt
复制代码
</code></pre></div><ul><li>开启路由功能</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    sysctl -w net.ipv4.ip_forward=1
复制代码
</code></pre></div><ul><li>写转发规则，将 80、443 端口进行转发给 8080 和 8443 端口</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080
    iptables -t nat -A PREROUTING -p tcp --dport 443 -j REDIRECT --to-ports 8443
复制代码
</code></pre></div><ul><li>最后使用 arpspoof 进行 arp 欺骗</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/YoFoon/FE-FACE/edit/master/knowledge/https.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/knowledge/cdn.html" class="prev">
          CDN 原理简析
        </a></span> <span class="next"><a href="/knowledge/http2.html">
          HTTP2
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.1274b19c.js" defer></script><script src="/assets/js/3.e5f6c01d.js" defer></script><script src="/assets/js/58.7d58a545.js" defer></script><script src="/assets/js/6.da654ace.js" defer></script>
  </body>
</html>
